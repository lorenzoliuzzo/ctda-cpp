<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Quantity | CTDA documentation</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Quantity" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A documentation for the CTDA library" /> <meta property="og:description" content="A documentation for the CTDA library" /> <link rel="canonical" href="http://localhost:4000/quantity" /> <meta property="og:url" content="http://localhost:4000/quantity" /> <meta property="og:site_name" content="CTDA documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Quantity" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A documentation for the CTDA library","headline":"Quantity","url":"http://localhost:4000/quantity"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> CTDA documentation </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/base_quantity" class="nav-list-link">Base quantity</a></li><li class="nav-list-item"><a href="/unit" class="nav-list-link">Unit</a></li><li class="nav-list-item active"><a href="/quantity" class="nav-list-link active">Quantity</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search CTDA documentation" aria-label="Search CTDA documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/lorenzoliuzzo/ctda" class="site-button" > CTDA on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="measurement"> <a href="#measurement" class="anchor-heading" aria-labelledby="measurement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Measurement </h1> <p>Most of the time we write code to solve a problem that has a physical meaning, we assume that the code that we write is physically correct, but often we do make mistakes or, simply, we do not fully understand the problem we are trying to solve yet.</p> <h2 id="a-simple-example"> <a href="#a-simple-example" class="anchor-heading" aria-labelledby="a-simple-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A simple example </h2> <p>Consider this basic example, where we want to do something physically meaningful, like calculating the force upon an object. Suppose an apple fell from a tree and hit your head so hard that you can not remember Newton’s second law of motion. You decide to calculate the force using whatever physical quantity presents itself to you. You measure the length of the tree and the mass of the apple and use them to calculate the force in this way:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="nf">calculate_force</span><span class="p">(</span><span class="kt">double</span> <span class="n">mass</span><span class="p">,</span> <span class="kt">double</span> <span class="n">length</span><span class="p">)</span> <span class="p">{</span>

  <span class="k">return</span> <span class="n">mass</span> <span class="o">+</span> <span class="n">length</span><span class="p">;</span>

<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// This code will compile because it's not wrong to add any generic numbers</span>
  <span class="kt">double</span> <span class="n">length</span><span class="p">{</span><span class="mf">2.5</span><span class="p">};</span>
  <span class="kt">double</span> <span class="n">mass</span><span class="p">{</span><span class="mf">3.0</span><span class="p">};</span>
  <span class="kt">double</span> <span class="n">force</span> <span class="o">=</span> <span class="n">calculate_force</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">mass</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>   
<span class="p">}</span>
</code></pre></div></div> <p>The code compiles, but it would give you a wrong anwser, because of the wrong physics law you choose to invent to calculate the force. This is due to the fact that the compiler does not know the physical meaning of the code, it only knows the type of the variables, which is not enough to understand the physical meaning of the code. To find these types of error, if we are lucky enough to notice some weird numerical results, we need to read the code and understand the physical meaning of the code, which is not always easy. As long as the compiler can not distinguish between numbers used to represents different physical quantities, it does not help us in any way and we are left with a mad search through the code. The solution is to use a type that encodes the physical meaning of the variable as well as its value type. The scipp library comes in handy here.</p> <p>The <code class="language-plaintext highlighter-rouge">measurement</code> struct represents a physical measurement as a value with a dimensional-aware template meta-structure. Using the measurement struct, it is possible to perform dimensional analysis at compile-time without loss of precision and overhead. Basically, writing physical accurate code is now possible and easy!</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">BASE_T</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">VALUE_TYPE</span> <span class="o">=</span> <span class="kt">double</span><span class="p">&gt;</span>
    <span class="k">requires</span> <span class="p">(</span><span class="n">is_base_v</span><span class="o">&lt;</span><span class="n">BASE_TYPE</span><span class="o">&gt;</span> <span class="o">&amp;&amp;</span> <span class="n">math</span><span class="o">::</span><span class="n">is_number_v</span><span class="o">&lt;</span><span class="n">VALUE_TYPE</span><span class="o">&gt;</span><span class="p">)</span>
<span class="k">struct</span> <span class="nc">measurement</span> <span class="p">{</span>

    <span class="k">using</span> <span class="n">base_t</span> <span class="o">=</span> <span class="n">BASE_TYPE</span><span class="p">;</span>   <span class="c1">///&lt; The base of the measurement</span>
    <span class="k">using</span> <span class="n">value_t</span> <span class="o">=</span> <span class="n">VALUE_TYPE</span><span class="p">;</span> <span class="c1">///&lt; The type of the value of the measurement</span>

    <span class="n">value_t</span> <span class="n">value</span><span class="p">;</span>              <span class="c1">///&lt; The value of the measurement</span>


    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">measurement</span> <span class="n">zero</span><span class="p">{</span><span class="n">value_t</span><span class="p">{}};</span>   <span class="c1">///&lt; The zero measurement</span>

    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">measurement</span> <span class="n">one</span><span class="p">{</span><span class="n">value_t</span><span class="p">{</span><span class="mf">1.0</span><span class="p">}};</span> <span class="c1">///&lt; The one measurement</span>


    <span class="c1">/// @brief Default constructor</span>
    <span class="k">constexpr</span> <span class="n">measurement</span><span class="p">()</span> <span class="k">noexcept</span> <span class="o">:</span> <span class="n">value</span><span class="p">{</span><span class="n">value_t</span><span class="p">{}}</span> <span class="p">{}</span>

    <span class="c1">/// @brief Construct a measurement from a scalar value</span>
    <span class="k">constexpr</span> <span class="n">measurement</span><span class="p">(</span><span class="k">const</span> <span class="n">value_t</span><span class="o">&amp;</span> <span class="n">val</span><span class="p">)</span> <span class="k">noexcept</span> <span class="o">:</span> <span class="n">value</span><span class="p">{</span><span class="n">val</span><span class="p">}</span> <span class="p">{}</span>

    <span class="c1">/// @brief Construct a measurement from a scalar value</span>
    <span class="k">constexpr</span> <span class="n">measurement</span><span class="p">(</span><span class="n">value_t</span><span class="o">&amp;&amp;</span> <span class="n">val</span><span class="p">)</span> <span class="k">noexcept</span> <span class="o">:</span> <span class="n">value</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">val</span><span class="p">)}</span> <span class="p">{}</span>

    <span class="c1">/// @brief Construct a measurement from a scalar value and an unit</span>
    <span class="c1">/// @note The unit must be of the same base of the measurement </span>
    <span class="c1">/// @note The value is immediatly converted to the base unit</span>
    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">UNIT_TYPE</span><span class="p">&gt;</span> 
        <span class="k">requires</span> <span class="p">(</span><span class="n">is_unit_v</span><span class="o">&lt;</span><span class="n">UNIT_TYPE</span><span class="o">&gt;</span> <span class="o">&amp;&amp;</span> <span class="n">is_same_base_v</span><span class="o">&lt;</span><span class="n">base_t</span><span class="p">,</span> <span class="k">typename</span> <span class="n">UNIT_TYPE</span><span class="o">::</span><span class="n">base_t</span><span class="o">&gt;</span><span class="p">)</span>
    <span class="k">constexpr</span> <span class="n">measurement</span><span class="p">(</span><span class="n">value_t</span><span class="o">&amp;&amp;</span> <span class="n">val</span><span class="p">,</span> <span class="k">const</span> <span class="n">UNIT_TYPE</span><span class="o">&amp;</span><span class="p">)</span> <span class="k">noexcept</span> <span class="p">{</span>

        <span class="k">using</span> <span class="n">prefix_t</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">UNIT_TYPE</span><span class="o">::</span><span class="n">prefix_t</span><span class="p">;</span>
        <span class="k">constexpr</span> <span class="k">auto</span> <span class="n">factor</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">prefix_t</span><span class="o">::</span><span class="n">num</span><span class="p">)</span> <span class="o">/</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">prefix_t</span><span class="o">::</span><span class="n">den</span><span class="p">);</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">value_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">val</span> <span class="o">*</span> <span class="n">factor</span><span class="p">);</span>
        
    <span class="p">}</span>

    <span class="c1">/// @brief Implicitly convert the measurement to a scalar value if it is a scalar base measurement</span>
    <span class="k">constexpr</span> <span class="k">operator</span> <span class="n">value_t</span><span class="p">()</span> <span class="k">const</span> <span class="k">requires</span> <span class="n">is_scalar_base_v</span><span class="o">&lt;</span><span class="n">base_t</span><span class="o">&gt;</span> <span class="p">{</span> 
        
        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">;</span> 

    <span class="p">}</span>

    <span class="c1">/// @brief Extract the value of this measurement converted to a specific unit</span>
    <span class="c1">/// @note The unit must be of the same base of the measurement</span>
    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">T</span><span class="p">&gt;</span>
    <span class="k">constexpr</span> <span class="k">auto</span> <span class="nf">value_as</span><span class="p">(</span><span class="k">const</span> <span class="n">unit</span><span class="o">&lt;</span><span class="n">base_t</span><span class="p">,</span> <span class="n">T</span><span class="o">&gt;&amp;</span><span class="p">)</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">/</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">T</span><span class="o">::</span><span class="n">num</span><span class="p">)</span> <span class="o">*</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">T</span><span class="o">::</span><span class="n">den</span><span class="p">);</span>

    <span class="p">}</span>   


    <span class="c1">/// @brief Print a measurement to an output stream</span>
    <span class="k">friend</span> <span class="k">constexpr</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">measurement</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">noexcept</span> <span class="p">{</span> 
        
        <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="n">other</span><span class="p">.</span><span class="n">value</span><span class="p">;</span> 
        <span class="k">if</span> <span class="k">constexpr</span> <span class="p">(</span><span class="o">!</span><span class="n">is_scalar_base_v</span><span class="o">&lt;</span><span class="n">base_t</span><span class="o">&gt;</span><span class="p">)</span> 
            <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="sc">' '</span> <span class="o">&lt;&lt;</span> <span class="n">base_t</span><span class="o">::</span><span class="n">to_string</span><span class="p">();</span>
        <span class="k">return</span> <span class="n">os</span><span class="p">;</span>
        
    <span class="p">}</span>

<span class="p">};</span>
</code></pre></div></div> <p>The value type is defaulted to double, but it can be changed to any type that supports the basic arithmetic operations. Operations between measurements with different units are allowed and they respect the dimensional analysis rules, i.e. we cannot sum two measurements with different base units, but we can multiply them to product something with a different physical meaning. For example, we can write the previous code in this way:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">measurement</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">length</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">length</span><span class="p">{</span><span class="mf">1.0</span><span class="p">};</span>
  <span class="n">measurement</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">mass</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">mass</span><span class="p">{</span><span class="mf">60.0</span><span class="p">};</span>
  <span class="n">measurement</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">force</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">force</span><span class="p">{</span><span class="n">length</span> <span class="o">*</span> <span class="n">mass</span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div> <p>This code will not compile yet because it contains incorrect physical operations, but at least the physical error in the code is now clear to the compiler, which will give us an error message that will help us understand the problem:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">error:</span> <span class="n">conversion</span> <span class="n">from</span> <span class="err">‘</span><span class="n">measurement</span><span class="o">&lt;</span><span class="n">base_quantity</span><span class="o">&lt;</span><span class="p">[...],</span><span class="mi">0</span><span class="p">,[...],[...],[...],[...],[...]</span><span class="o">&gt;</span><span class="p">,[...]</span><span class="o">&gt;</span><span class="err">’</span> <span class="n">to</span> <span class="n">non</span><span class="o">-</span><span class="n">scalar</span> <span class="n">type</span> <span class="err">‘</span><span class="n">measurement</span><span class="o">&lt;</span><span class="n">base_quantity</span><span class="o">&lt;</span><span class="p">[...],</span><span class="o">-</span><span class="mi">2</span><span class="p">,[...],[...],[...],[...],[...]</span><span class="o">&gt;</span><span class="p">,[...]</span><span class="o">&gt;</span><span class="err">’</span> <span class="n">requested</span> <span class="n">here</span><span class="o">:</span>
    <span class="n">measurement</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">force</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">force</span> <span class="o">=</span> <span class="n">length</span> <span class="o">*</span> <span class="n">mass</span><span class="p">;</span>
</code></pre></div></div> <p>We are indeed trying to assign a value obtained from the multiplication of a length and a mass, which does not correspond to the physical meaning of the force, to a variable of type <code class="language-plaintext highlighter-rouge">measurement&lt;basis::force, double&gt;</code>.</p> <p>Remembering Newton second law, we can rewrite the previous code in the correct way:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">measurement</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">acceleration</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">{</span><span class="mf">1.0</span><span class="p">};</span>
  <span class="n">measurement</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">mass</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">m</span><span class="p">{</span><span class="mf">60.0</span><span class="p">};</span>
  <span class="n">measurement</span><span class="o">&lt;</span><span class="n">base</span><span class="o">::</span><span class="n">force</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">F</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">a</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>Maybe you are thinking that this is all very nice, but that it is not worth the effort to write code in this way, because it is too complicated, but simply this is not true. In fact, the code is not more complicated, it is just different. Please note that this is all done at compile time, so we don’t have to run the code and maybe, if we are lucky, find a little suspicius numerical result that will make us think that something is wrong in the code and then manually debug it to find the error. The compiler will tell us exactly where the error is and what the error is, so we can fix it immediately and return to code. Another advantage of using the measurement struct is that we can do not bother about conversions between units, instead we can just write our physical code in a natural way, as we would do on paper.</p> </main> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2023 Lorenzo Liuzzo</p> </footer> </div> </div> <button id="search-button" class="search-button btn-reset" aria-label="Focus on search"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-search"></use></svg> </button> <div class="search-overlay"></div> </div> </body> </html>
